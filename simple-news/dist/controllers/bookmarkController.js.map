{"version":3,"sources":["../../server/controllers/bookmarkController.js"],"names":["exports","handleBookmark","req","res","next","bookmarkArticle","session","news","articles","filter","article","publishedAt","body","id","bookmarks","push","updateBookmark","json","locals","myBookmarks","render","pageTitle"],"mappings":";;AAAAA,QAAQC,cAAR,GAAyB,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC5C,OAAMC,kBAAkBH,IAAII,OAAJ,CAAYC,IAAZ,CAAiBC,QAAjB,CAA0BC,MAA1B,CAAiCC,WAAW;AACnE,SAAS,QAAOA,QAAQC,WAAY,EAA7B,KAAoCT,IAAIU,IAAJ,CAASC,EAApD;AACA,EAFuB,CAAxB;;AAIA;AACA;AACA;AACAX,KAAII,OAAJ,CAAYQ,SAAZ,CAAsBC,IAAtB,CAA2BV,gBAAgB,CAAhB,CAA3B;;AAEAD;AACA,CAXD;;AAaAJ,QAAQgB,cAAR,GAAyB,CAACd,GAAD,EAAMC,GAAN,KAAc;AACtCA,KAAIc,IAAJ,CAAS,EAAEH,WAAWX,IAAIe,MAAJ,CAAWJ,SAAxB,EAAT;AACA,CAFD;;AAIAd,QAAQmB,WAAR,GAAsB,CAACjB,GAAD,EAAMC,GAAN,KAAc;AACnCA,KAAIiB,MAAJ,CAAW,UAAX,EAAuB;AACtBC,aAAW,cADW;AAEtBb,YAAUL,IAAIe,MAAJ,CAAWJ,SAAX,IAAwBX,IAAIe,MAAJ,CAAWJ;AAFvB,EAAvB;AAIA,CALD","file":"bookmarkController.js","sourcesContent":["exports.handleBookmark = (req, res, next) => {\n\tconst bookmarkArticle = req.session.news.articles.filter(article => {\n\t\treturn (`item-${article.publishedAt}`) === req.body.id;\n\t});\n\n\t// If the article exists in res.local.bookmarks remove it\n\t// Else add it\n\t// if (bookmarkArticle ...) {}\n\treq.session.bookmarks.push(bookmarkArticle[0]);\n\t\n\tnext();\n}\n\nexports.updateBookmark = (req, res) => {\n\tres.json({ bookmarks: res.locals.bookmarks });\n};\n\nexports.myBookmarks = (req, res) => {\n\tres.render('homePage', {\n\t\tpageTitle: 'My bookmarks',\n\t\tarticles: res.locals.bookmarks && res.locals.bookmarks\n\t});\n}"]}